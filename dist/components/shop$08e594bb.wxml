<template name="shop$08e594bb">
  <view class="_div data-v-a3ec2446">
    <modal hidden="{{modalstate}}" title="提示" confirm-text="提交" cancel-text="取消" bindcancel="handleProxy" bindconfirm="handleProxy" data-eventid="{{'2'}}" data-comkey="{{$k}}" class="_modal data-v-a3ec2446">
      <view class="_div data-v-a3ec2446 model-msg">请填写你的手机号码作为唯一凭据</view>
      <view class="_div data-v-a3ec2446"><input style="border: 2px solid #227D51;border-radius: 5px;width:60%;float:left;height:50rpx" type="text" placeholder="手机号码" value="{{userdata.phone}}" bindinput="handleProxy" auto-focus data-eventid="{{'0'}}" data-comkey="{{$k}}" class="_input data-v-a3ec2446" /> <button style="width:33%;float:right" size="mini" open-type="getPhoneNumber" bindgetphonenumber="handleProxy" type="primary" data-eventid="{{'1'}}" data-comkey="{{$k}}" class="_button data-v-a3ec2446">自动获取</button></view>
      <view style="clear:both" class="_div data-v-a3ec2446"></view>
    </modal>
    <modal hidden="{{rulemodal}}" title="规则" confirm-text="好的" no-cancel="true" bindconfirm="handleProxy" data-eventid="{{'3'}}" data-comkey="{{$k}}" class="_modal data-v-a3ec2446">
      <scroll-view scroll-y="true" class="_scroll-view data-v-a3ec2446 shop-model">
        <view class="_div data-v-a3ec2446">
          <view class="_div data-v-a3ec2446">
            <view class="_h2 data-v-a3ec2446 h2">关于积分：</view>
            <view class="_p data-v-a3ec2446">北鼻们签到一次能获得两种积分： </view>
            <view class="_p data-v-a3ec2446"></view>
            <view class="_p data-v-a3ec2446">1、<label style="color:red" class="_span data-v-a3ec2446">排行积分</label>，用于积分排行 </view>
            <view class="_p data-v-a3ec2446">2、<label style="color:red" class="_span data-v-a3ec2446">商城积分</label>，两种积分互不干扰， 商城积分的使用不会影响北鼻签到总积分的排行榜排名，所以北鼻可尽情冲击21天后的终极大奖噢!</view>
            <view class="_h2 data-v-a3ec2446 h2">关于兑换：</view>
            <view class="_p data-v-a3ec2446">1、商品兑换无日期限制，可持续到所有商品被兑换完毕，但是由于其他意外可能会暂时下架噢</view>
            <view class="_p data-v-a3ec2446">2、第一次兑换商品需要手机号呢，这可以为以后我们给北鼻赠送或者补偿提供联络方式</view>
            <view class="_p data-v-a3ec2446"></view>
            <view class="_h2 data-v-a3ec2446 h2">关于使用：</view>
            <view class="_p data-v-a3ec2446">1、北鼻兑换成功后，到对应的商铺去使用，向店员（或者我们的工作人员）出示该优惠券，并由店员点击使用按钮</view>
            <view class="_p data-v-a3ec2446">2、若是北鼻手误点了使用并确认使用，我们也无能为力呢~</view>
            <view class="_p data-v-a3ec2446">3、所以北鼻在兑换时请小心使用！</view>
            <view class="_p data-v-a3ec2446">-></view>
            <view class="_p data-v-a3ec2446">如果兑换失败或者其他问题，请及时在公众号向小北反馈噢</view>
            <view class="_p data-v-a3ec2446">-></view>
            <view class="_h2 data-v-a3ec2446 h2">北理小报保留对以上规则的解释权</view>
          </view>
        </view>
      </scroll-view>
    </modal>
    <modal hidden="{{shopmodal}}" title="{{shoplins.description}}" confirm-text="好的" no-cancel="true" bindconfirm="handleProxy" data-eventid="{{'4'}}" data-comkey="{{$k}}" class="_modal data-v-a3ec2446">
      <scroll-view scroll-y="true" class="_scroll-view data-v-a3ec2446 shop-model">
        <view class="_div data-v-a3ec2446">
          <image class="_img data-v-a3ec2446 img" src="{{shoplins.image}}"></image>
          <view class="_div data-v-a3ec2446">
            <view class="_h2 data-v-a3ec2446 h2">过期时间：</view>
            <view class="_p data-v-a3ec2446">{{shoplins.soldoutTime}}</view>
            <view class="_p data-v-a3ec2446"></view>
            <view class="_h2 data-v-a3ec2446 h2">优惠说明：</view>
            <view class="_p data-v-a3ec2446">{{shoplins.couponExplain}} </view>
            <view class="_p data-v-a3ec2446"></view>
            <view class="_h2 data-v-a3ec2446 h2">使用说明：</view>
            <view class="_p data-v-a3ec2446">{{shoplins.useExplain}}</view>
          </view>
        </view>
      </scroll-view>
    </modal>
    <view class="_div data-v-a3ec2446 head">
      <view class="_div data-v-a3ec2446 list" bindtap="handleProxy" data-eventid="{{'5'}}" data-comkey="{{$k}}" style=" {{style1}}">商品列表</view>
      <view class="_div data-v-a3ec2446 list" bindtap="handleProxy" data-eventid="{{'6'}}" data-comkey="{{$k}}" style=" {{style2}}">兑换记录</view>
    </view>
    <view class="_div data-v-a3ec2446 jifen" wx:if="{{number==1}}">
      <view class="_div data-v-a3ec2446 yuer">积分余额</view>
      <view class="_div data-v-a3ec2446 jifen-num">💰{{userdata.jifen}}分</view>
      <image class="_img data-v-a3ec2446 rule" bindtap="handleProxy" src="http://image.myzhbit.cn/myzhbit/Getup/index/rule.png" data-eventid="{{'7'}}" data-comkey="{{$k}}"></image>
    </view>
    <scroll-view scroll-y="true" class="_scroll-view data-v-a3ec2446 shop1" wx:if="{{number==1}}">
      <view class="_div data-v-a3ec2446 shop-list">
        <view class="_div data-v-a3ec2446 shop-item" wx:key="sl" key="{{sl}}" wx:for="{{shoplist}}" wx:for-index="index" wx:for-item="sl">
          <view class="_div data-v-a3ec2446 shop-msg" bindtap="handleProxy" data-eventid="{{'8-'+index}}" data-comkey="{{$k}}">
            <view style="padding: 10rpx" class="_div data-v-a3ec2446">
              <view style="font-size: 50rpx;font-weight: bold;color:black" class="_p data-v-a3ec2446">{{sl.score}}<label style="font-size: 20rpx;" class="_span data-v-a3ec2446"> 积分</label></view>
              <view class="_p data-v-a3ec2446"></view>
              <view class="_p data-v-a3ec2446">{{sl.name}}</view>
              <view class="_div data-v-a3ec2446 border"></view>
              <view style="font-size: 25rpx;" class="_p data-v-a3ec2446">{{sl.description}}</view>
            </view>
          </view>
          <view class="_div data-v-a3ec2446 shop-msg2">
            <view style="width:100%;text-align: center;" class="_div data-v-a3ec2446">
              <view style="color:#5F6263" class="_div data-v-a3ec2446">还剩<label style="color:red" class="_span data-v-a3ec2446">{{sl.count}}</label>个</view>
            </view>
            <view class="_div data-v-a3ec2446 button" bindtap="handleProxy" data-eventid="{{'9-'+index}}" data-comkey="{{$k}}"> 兑换 </view>
          </view>
        </view>
      </view>
    </scroll-view>
    <scroll-view scroll-y="true" class="_scroll-view data-v-a3ec2446 shop" wx:if="{{number==3}}">
      <view class="_div data-v-a3ec2446 shop-list" wx:key="sl" key="{{sl}}" wx:for="{{shoplist}}" wx:for-index="index" wx:for-item="sl">
        <view class="_div data-v-a3ec2446 shop-item" bindtap="handleProxy" data-eventid="{{'10-'+index}}" data-comkey="{{$k}}">
          <view class="_div data-v-a3ec2446 shop-img">
            <image class="_img data-v-a3ec2446 shop-img" src="{{sl.img}}"></image>
            <view class="_div data-v-a3ec2446 shop-img2">   {{sl.name2}}</view>
          </view>
          <view class="_div data-v-a3ec2446 shop-msg">
            <view class="_div data-v-a3ec2446 left">
              {{sl.name}}
            </view>
            <view class="_div data-v-a3ec2446 right"> 💰 {{sl.much}}   |   🎁 {{sl.left}}
            </view>
          </view>
        </view>
      </view>
    </scroll-view>
    <scroll-view scroll-y="true" class="_scroll-view data-v-a3ec2446 log" wx:if="{{number==2}}">
      <view wx:if="{{tick==''}}" style="text-align: center;margin-top:50rpx;color:#F19483" class="_div data-v-a3ec2446">你还没有兑换任何奖品噢！</view>
      <view class="_div data-v-a3ec2446 log-item" wx:key="tk" key="{{tk}}" wx:for="{{tick}}" wx:for-index="index" wx:for-item="tk">
        <view class="_div data-v-a3ec2446 log-left" style=" {{tk.state == 0 ? 'background:rgb(110, 101, 98);' : ''}}">
          <view class="_div data-v-a3ec2446">
            <image class="_img data-v-a3ec2446 log-img" src="{{tk.image}}"></image>
          </view>
          <view class="_div data-v-a3ec2446 log-msg">
            <view style="font-weight: bold;" class="_div data-v-a3ec2446">{{tk.name}}</view>
            <view class="_div data-v-a3ec2446">------------------</view>
            <view style="font-size: 25rpx;" class="_div data-v-a3ec2446">{{tk.state==0?'使用日期':'截止使用'}}:{{tk.state==0?tk.useTime:tk.soldoutTime}}</view>
          </view>
        </view>
        <view class="_div data-v-a3ec2446 log-right" bindtap="handleProxy" data-eventid="{{'11-'+index}}" data-comkey="{{$k}}" style=" {{tk.state == 0 ? 'background:rgb(110, 101, 98);margin-left: 10px;' : ''}}"><label class="_span data-v-a3ec2446">{{tk.state==0?'已使用':'使用'}}</label></view>
      </view>
    </scroll-view>
  </view>
</template>